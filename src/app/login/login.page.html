<ion-content [fullscreen]="true" class="login-content">
  <div class="login-container">
    
    <!-- Header -->
    <div class="header-section">
      <div class="logo-container">
        <div class="shield-icon">
          <img src="assets/icon/favicon.png" alt="Ícone-logo ilustrado de um cavalheiro em cima de um cavalo segurando uma espada e um escudo" class="logo-image">
        </div>
      </div>
      <h1 class="app-name">Soteria</h1>
      <p class="welcome-text">Bem-vindo de volta, cavalheiro!</p>
    </div>

    <!-- Form -->
    <div class="form-section">
      
      <!-- Senha Mestra -->
      <div class="input-group">
        <ion-label class="input-label">Senha Mestra</ion-label>
        <div class="password-input-wrapper">
          <ion-input
            [(ngModel)]="masterPassword"
            [type]="showPassword ? 'text' : 'password'"
            placeholder="Digite sua senha mestra"
            class="custom-input"
            [class.error]="loginError"
            [disabled]="isAuthenticating"
            (ionInput)="onPasswordInput()"
            (keyup.enter)="authenticateWithPassword()"
          ></ion-input>
          <ion-button
            fill="clear"
            class="toggle-password-btn"
            (click)="togglePasswordVisibility()"
            [disabled]="isAuthenticating"
          >
            <ion-icon [name]="showPassword ? 'eye-off' : 'eye'"></ion-icon>
          </ion-button>
        </div>
        
        <p *ngIf="loginError" class="error-message">
          <ion-icon name="alert-circle"></ion-icon>
          Senha incorreta
        </p>
      </div>

      <!-- Login Button -->
      <ion-button
        expand="block"
        class="login-button"
        (click)="authenticateWithPassword()"
        [disabled]="!masterPassword || isAuthenticating"
      >
        <ion-spinner *ngIf="isAuthenticating" name="crescent"></ion-spinner>
        <ion-icon *ngIf="!isAuthenticating" name="lock-closed" slot="start"></ion-icon>
        <span *ngIf="!isAuthenticating">Desbloquear</span>
      </ion-button>

      <!-- Divider -->
      <div class="divider" *ngIf="biometricAvailable && biometricEnabled">
        <span class="divider-text">ou</span>
      </div>

      <!-- Biometric Button -->
      <ion-button
        *ngIf="biometricAvailable && biometricEnabled"
        expand="block"
        fill="outline"
        class="biometric-button"
        (click)="authenticateWithBiometric()"
        [disabled]="isAuthenticating"
      >
        <ion-icon name="finger-print" slot="start"></ion-icon>
        Usar Biometria
      </ion-button>

    </div>

    <!-- Footer Info -->
    <div class="footer-section">
      <p class="help-text">
        Esqueceu sua senha mestra? Não é possível recuperá-la. 
        Você precisará reinstalar o aplicativo e configurar novamente.
      </p>
    </div>

  </div>
</ion-content>